<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XPORTA - Mis Productos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Link to our main app script -->
    <script src="app.js" defer></script>
    <style>
        .modal-open {
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-[var(--color-bg-primary)] text-[var(--color-text-primary)] flex flex-col min-h-screen">

    <!-- Header will be injected here by app.js -->
    <div id="main-header"></div>

    <!-- Main Content -->
    <main class="container mx-auto p-6 md:p-8 flex-grow">
        <div class="max-w-5xl mx-auto">
            <a href="dashboard.html" class="text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] text-sm inline-flex items-center mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                Volver al Panel de Control
            </a>
            <div class="flex flex-col md:flex-row justify-between md:items-center gap-4 mb-8">
                <div>
                    <h2 class="text-3xl md:text-4xl font-bold text-[var(--color-text-primary)]">Mis Productos</h2>
                    <p class="text-[var(--color-text-secondary)] mt-2">Gestiona los productos que muestras en el Marketplace de XPORTA.</p>
                </div>
                <button id="add-product-btn" class="w-full md:w-auto bg-[var(--color-accent)] text-white font-semibold py-2 px-5 rounded-lg shadow-md hover:bg-[var(--color-accent-hover)] transition-colors flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>
                    Añadir Nuevo Producto
                </button>
            </div>

            <!-- Products Table -->
            <div class="bg-[var(--color-bg-secondary)] border border-[var(--color-border)] rounded-lg shadow-lg overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead class="bg-[color-mix(in_srgb,var(--color-bg-secondary)_50%,transparent)]">
                            <tr>
                                <th scope="col" class="px-6 py-3 font-semibold text-[var(--color-text-primary)]">Producto</th>
                                <th scope="col" class="px-6 py-3 font-semibold text-[var(--color-text-primary)]">SKU</th>
                                <th scope="col" class="px-6 py-3 font-semibold text-[var(--color-text-primary)]">Estado</th>
                                <th scope="col" class="px-6 py-3 font-semibold text-[var(--color-text-primary)]"><span class="sr-only">Acciones</span></th>
                            </tr>
                        </thead>
                        <tbody id="product-table-body">
                            <!-- Row 1 -->
                            <tr class="border-b border-[var(--color-border)]">
                                <td class="px-6 py-4 font-medium text-[var(--color-text-primary)] whitespace-nowrap">Mole Negro Oaxaqueño</td>
                                <td class="px-6 py-4 text-[var(--color-text-secondary)]">MOL-NEG-500G</td>
                                <td class="px-6 py-4">
                                    <span class="inline-flex items-center bg-green-900 text-green-300 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">
                                        <span class="w-2 h-2 mr-1 bg-green-500 rounded-full"></span>
                                        Publicado
                                    </span>
                                </td>
                                <td class="px-6 py-4 text-right space-x-4">
                                    <button class="font-medium text-[var(--color-accent)] hover:underline">Editar</button>
                                    <button class="font-medium text-red-500 hover:underline">Eliminar</button>
                                </td>
                            </tr>
                            <!-- Row 2 -->
                            <tr class="border-b border-[var(--color-border)]">
                                <td class="px-6 py-4 font-medium text-[var(--color-text-primary)] whitespace-nowrap">Café Orgánico de Altura</td>
                                <td class="px-6 py-4 text-[var(--color-text-secondary)]">CAF-CHI-1KG</td>
                                <td class="px-6 py-4">
                                    <span class="inline-flex items-center bg-yellow-900 text-yellow-300 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">
                                        <span class="w-2 h-2 mr-1 bg-yellow-500 rounded-full"></span>
                                        Borrador
                                    </span>
                                </td>
                                <td class="px-6 py-4 text-right space-x-4">
                                    <button class="font-medium text-[var(--color-accent)] hover:underline">Editar</button>
                                    <button class="font-medium text-red-500 hover:underline">Eliminar</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer will be injected here by app.js -->
    <div id="main-footer"></div>

    <!-- Add/Edit Product Modal -->
    <div id="product-modal" class="fixed inset-0 z-50 items-center justify-center hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div id="modal-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm transition-opacity"></div>
        <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center">
                <div class="relative transform overflow-hidden rounded-lg bg-[var(--color-bg-secondary)] text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg border border-[var(--color-border)]">
                    <form id="product-form">
                        <div class="bg-[var(--color-bg-secondary)] px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                            <div class="flex justify-between items-start">
                                <h3 class="text-lg font-semibold leading-6 text-[var(--color-text-primary)]" id="modal-title">Añadir Nuevo Producto</h3>
                                <button type="button" id="close-modal-btn" class="text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]">&times;</button>
                            </div>
                            <div class="mt-4 space-y-4">
                                <div><label for="product-name" class="block text-sm font-medium text-[var(--color-text-secondary)] mb-1">Nombre del Producto</label><input type="text" id="product-name" name="product-name" required class="form-input"></div>
                                <div><label for="product-category" class="block text-sm font-medium text-[var(--color-text-secondary)] mb-1">Categoría</label><select id="product-category" name="product-category" class="form-select"><option value="alimentos">Alimentos y Bebidas</option><option value="artesanias">Artesanías</option><option value="textiles">Ropa y Textiles</option></select></div>
                                <div><label for="product-description" class="block text-sm font-medium text-[var(--color-text-secondary)] mb-1">Descripción Detallada</label><textarea id="product-description" name="product-description" rows="4" required class="form-textarea"></textarea></div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div><label for="product-sku" class="block text-sm font-medium text-[var(--color-text-secondary)] mb-1">SKU</label><input type="text" id="product-sku" name="product-sku" required class="form-input"></div>
                                    <div><label for="product-price" class="block text-sm font-medium text-[var(--color-text-secondary)] mb-1">Precio (MXN)</label><input type="number" id="product-price" name="product-price" required class="form-input"></div>
                                </div>
                                <div><label for="product-image" class="block text-sm font-medium text-[var(--color-text-secondary)] mb-1">Imagen Principal</label><input type="file" id="product-image" name="product-image" class="form-input file:mr-4 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-accent)] file:text-white hover:file:bg-[var(--color-accent-hover)]"></div>
                            </div>
                        </div>
                        <div class="bg-[color-mix(in_srgb,var(--color-bg-secondary)_50%,transparent)] px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 border-t border-[var(--color-border)]/50">
                            <button type="submit" name="action" value="publish" class="inline-flex w-full justify-center rounded-md bg-[var(--color-accent)] px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-[var(--color-accent-hover)] sm:ml-3 sm:w-auto transition-colors">Publicar Producto</button>
                            <button type="submit" name="action" value="draft" class="mt-3 inline-flex w-full justify-center rounded-md bg-gray-700 px-4 py-2 text-sm font-semibold text-[var(--color-text-primary)] shadow-sm ring-1 ring-inset ring-gray-600 hover:bg-gray-600 sm:mt-0 sm:w-auto transition-colors">Guardar como Borrador</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="mis_productos.js"></script>
</body>
</html>
